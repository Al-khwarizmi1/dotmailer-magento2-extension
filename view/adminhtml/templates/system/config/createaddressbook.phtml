<script>
	require(['prototype', 'domReady'], function(){

//<![CDATA[

		function createdatafield() {
			console.log('create datafields');
			var validationMessage = $('validation_result');
			var datafield_name  	= $('connector_data_mapping_dynamic_datafield_datafield_name').value;
			var datafield_type  	= $('connector_data_mapping_dynamic_datafield_datafield_type').value;
			var datafield_default  	= $('connector_data_mapping_dynamic_datafield_datafield_default').value;
			var datafield_access    = $('connector_data_mapping_dynamic_datafield_datafield_access').value;


			params = {
				name : 'datafield_name',
				type : 'datafield_type',
				deafult : 'datafield_default',
				access : 'datafield_access'
			}

			new Ajax.Request('<?php echo $block->getAjaxUrl() ?>', {
				parameters: params,
				onSuccess: function(response) {
					result = '<?php echo __('Datafield Created.') ?>';
					try {
						response = response.responseText;
						if (response == 1) {
							result = '<?php echo __('Datafield Success') ?>';
							validationMessage.removeClassName('hidden').addClassName('success')
						} else {
							validationMessage.removeClassName('hidden').addClassName('error')
						}
					} catch (e) {
						validationMessage.removeClassName('hidden').addClassName('error')
					}
					validationMessage.update(result);
				}
			});
		}

//]]
	});

</script>
<div class="actions actions-create-datafield">
	<div id="validation_result" class="message-validation hidden"></div>
	<button onclick="javascript:createdatafield(); return false;" class="action-create-datafield" type="button" id="<?php echo $block->getHtmlId() ?>">
		<span><?php echo $block->escapeHtml($block->getButtonLabel()) ?></span>
	</button>
</div>
